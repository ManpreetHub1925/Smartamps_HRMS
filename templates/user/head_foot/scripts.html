
<!-- jQuery -->
<!-- <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="|49" defer></script>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"935f95358b708e86","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.4.0-1-g37f21b1","token":"3ca157e612a14eccbb30cf6db6691c29"}' crossorigin="anonymous"></script> -->


<script src="{{ url_for('static', filename='assets/js/jquery-3.7.1.min.js') }}" type="text/javascript"></script>

<!-- Bootstrap Core JS -->
<script src="{{ url_for('static', filename='assets/js/bootstrap.bundle.min.js') }}" type="text/javascript"></script>

<!-- Feather Icon JS -->
<script src="{{ url_for('static', filename='assets/js/feather.min.js') }}" type="text/javascript"></script>

<!-- Slimscroll JS -->
<script src="{{ url_for('static', filename='assets/js/jquery.slimscroll.min.js') }}" type="text/javascript"></script>

<!-- Summernote JS -->
<script src="{{ url_for('static', filename='assets/plugins/summernote/summernote-lite.min.js') }}" type="text/javascript"></script>

<!-- Color Picker JS -->
<script src="{{ url_for('static', filename='assets/js/plyr-js.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/@simonwep/pickr/pickr.es5.min.js') }}" type="text/javascript"></script>

<!-- Datatable JS -->
<script src="{{ url_for('static', filename='assets/js/jquery.dataTables.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/dataTables.bootstrap5.min.js') }}" type="text/javascript"></script>	

<!-- Bootstrap Tagsinput JS -->
<script src="{{ url_for('static', filename='assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js') }}" type="text/javascript"></script>

<!-- Owl Carousel -->
<script src="{{ url_for('static', filename='assets/plugins/owlcarousel/owl.carousel.min.js') }}" type="text/javascript"></script>

<!-- Daterangepikcer JS -->
<script src="{{ url_for('static', filename='assets/js/moment.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.js') }}" type="text/javascript"></script>


<!-- Fullcalendar JS -->
<script src="{{ url_for('static', filename='assets/plugins/fullcalendar/index.global.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/fullcalendar/calendar-data.js') }}" type="text/javascript"></script>

<!-- Datetimepicker JS -->
<script src="{{ url_for('static', filename='assets/js/bootstrap-datetimepicker.min.js') }}" type="text/javascript"></script>

<!-- Select2 JS -->
<script src="{{ url_for('static', filename='assets/plugins/select2/js/select2.min.js') }}" type="text/javascript"></script>

<!-- Theiastickysidebar JS -->
<script src="{{ url_for('static', filename='assets/plugins/theia-sticky-sidebar/theia-sticky-sidebar.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/theia-sticky-sidebar/ResizeSensor.min.js') }}" type="text/javascript"></script>

<!-- Owl Carousel JS -->
<script src="{{ url_for('static', filename='assets/js/owl.carousel.min.js') }}" type="text/javascript"></script>


<!-- Chart JS -->
<!-- <script src="{{ url_for('static', filename='assets/plugins/apexchart/apexcharts.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/apexchart/chart-data.js') }}" type="text/javascript"></script> -->

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<!-- Slimscroll JS -->
<script src="{{ url_for('static', filename='assets/js/jquery.slimscroll.min.js') }}" type="text/javascript"></script>

<!-- Sticky Sidebar JS -->
<script src="{{ url_for('static', filename='assets/plugins/theia-sticky-sidebar/ResizeSensor.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/theia-sticky-sidebar/theia-sticky-sidebar.js') }}" type="text/javascript"></script>

<!-- Fancybox JS -->
<script src="{{ url_for('static', filename='assets/plugins/fancybox/jquery.fancybox.min.js') }}" type="text/javascript"></script>

<!-- Chart JS -->
<script src="{{ url_for('static', filename='assets/plugins/chartjs/chart.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/plugins/chartjs/chart-data.js') }}" type="text/javascript"></script>

<script src="{{ url_for('static', filename='assets/js/email.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/kanban.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/invoice.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/projects.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/add-comments.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/file-manager.js') }}" type="text/javascript"></script>

<!-- Custom JS -->
<script src="{{ url_for('static', filename='assets/js/todo.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/theme-colorpicker.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/js/script.js') }}" type="text/javascript"></script>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // OTP Input Handling
            const inputs = document.querySelectorAll('.digit-group input[type="text"]');
            inputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1) {
                        if (index < inputs.length - 1) {
                            inputs[index + 1].focus();
                        } else {
                            this.blur();
                            document.querySelector('form').submit();
                        }
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0) {
                        if (index > 0) {
                            inputs[index - 1].focus();
                        }
                    }
                });
            });

            // Countdown Timer
            let timeLeft = 10;
            const timerElement = document.getElementById('otp-timer');
            const countdownElement = document.getElementById('countdown');
            const resendLink = document.getElementById('resend-otp-link');
            const resendText = document.getElementById('resend-text');
            
            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                countdownElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    resendLink.style.display = 'inline';
                    resendText.style.display = 'none';
                } else {
                    timeLeft--;
                }
            }
            
            const timerInterval = setInterval(updateTimer, 1000);
            updateTimer();

            // Resend OTP AJAX handling
            resendLink.addEventListener('click', function(e) {
                e.preventDefault();
                resendLink.style.pointerEvents = 'none';
                resendLink.classList.add('text-muted');
                
                fetch(this.href)
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            // Reset timer
                            timeLeft = 10;
                            clearInterval(timerInterval);
                            timerInterval = setInterval(updateTimer, 1000);
                            
                            // Update UI
                            resendLink.style.display = 'none';
                            resendText.style.display = 'inline';
                            resendLink.style.pointerEvents = '';
                            resendLink.classList.remove('text-muted');
                            
                            // Show flash message
                            const flashDiv = document.createElement('div');
                            flashDiv.className = 'alert alert-success alert-dismissible fade show';
                            flashDiv.innerHTML = `
                                ${data.message}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            `;
                            document.querySelector('.container').prepend(flashDiv);
                            setTimeout(() => flashDiv.remove(), 5000);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        resendLink.style.pointerEvents = '';
                        resendLink.classList.remove('text-muted');
                    });
            });
        });
    </script>
    

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // OTP Input Handling
            const inputs = document.querySelectorAll('.otp-input input[type="text"]');
            inputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1) {
                        if (index < inputs.length - 1) {
                            inputs[index + 1].focus();
                        } else {
                            this.blur();
                            document.querySelector('form').submit();
                        }
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0) {
                        if (index > 0) {
                            inputs[index - 1].focus();
                        }
                    }
                });
            });
    
            // Countdown Timer
            let timeLeft = 10;
            const timerElement = document.getElementById('otp-timer');
            const countdownElement = document.getElementById('countdown');
            const resendLink = document.getElementById('resend-otp-link');
            const resendText = document.getElementById('resend-text');
            
            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                countdownElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    resendLink.style.display = 'inline';
                    resendText.style.display = 'none';
                } else {
                    timeLeft--;
                }
            }
            
            const timerInterval = setInterval(updateTimer, 1000);
            updateTimer();
    
            // Resend OTP AJAX handling
            resendLink.addEventListener('click', function(e) {
                e.preventDefault();
                resendLink.style.pointerEvents = 'none';
                resendLink.classList.add('text-muted');
                
                fetch(this.href)
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            // Reset timer
                            timeLeft = 10;
                            clearInterval(timerInterval);
                            timerInterval = setInterval(updateTimer, 1000);
                            
                            // Update UI
                            resendLink.style.display = 'none';
                            resendText.style.display = 'inline';
                            resendLink.style.pointerEvents = '';
                            resendLink.classList.remove('text-muted');
                            
                            // Show flash message
                            const flashDiv = document.createElement('div');
                            flashDiv.className = 'alert alert-success alert-dismissible fade show';
                            flashDiv.innerHTML = `
                                ${data.message}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            `;
                            document.querySelector('.container').prepend(flashDiv);
                            setTimeout(() => flashDiv.remove(), 5000);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        resendLink.style.pointerEvents = '';
                        resendLink.classList.remove('text-muted');
                    });
            });
        });
    </script>

    <script>
        // Initialize Select2 for searchable dropdown
        $(document).ready(function() {
            $('#company_id').select2({
                placeholder: 'Select Organization Name or ID',
                allowClear: true
            });
        });
    </script>

    <script>
        // JavaScript to handle updating the hidden company_id field when a company is selected
        document.querySelector('input[name="company_id"]').addEventListener('input', function() {
            document.getElementById('hidden_company_id').value = this.value;
        });
    </script>

    <script>
        // JavaScript to handle company selection and add custom behavior if needed
        document.querySelector('#companySearch').addEventListener('input', function() {
            // You can add custom logic here if needed to process input
        });
    </script>




